import Content from "../../content";
import Code from "../../code";
import localDemoCode from "./index.tsx?raw";
import {PROFILE_TURTLE} from "../../../constants";
import {NavLink} from "react-router-dom";
import CodeStep from "../../code/step";

<Content>
    This demo loads and saves a given name to `localStorage`. If no data is saved in `localStorage` from before, it will
    use a pre-set turtle that contains a simple profile with the name "Test".
</Content>

<Code language="turtle" id="ProfileTurtle" code={PROFILE_TURTLE} noCopy={true}/>

<Content>
    (If the above code doesn't make sense for you, you might want to consider reading the <NavLink to={"/rdf"}>guide on
    RDF</NavLink>.)
</Content>

<Code language="tsx" id="RdflibLocalDemo" code={localDemoCode} className="line-numbers">
    <CodeStep lines={["9"]} title="Store setup">
        Setting up the store that's going to contain our data.
    </CodeStep>
    <CodeStep lines={["12", "16", "23", "27", "34"]} title="Error handling">
        We might expect two errors when working with this demo. First, when we parse the turtle (e.g. the text might
        invalid turtle). Second, something might go wrong when we serialize the RDF graph back into turtle text. Any
        error are passed onto the `Demo` component.
    </CodeStep>
    <CodeStep lines={["15-18", "33", "35"]} title="Parsing turtle and loading name">
        Loading existing data from either default turtle or saved turtle from `localStorage`. Until a name is found we
        show the `Loading` component.
    </CodeStep>
    <CodeStep lines={["24-30"]} title="Updating turtle in `localStorage` and name">
        Upon submitting the form, a new triple with the name is inserted while the old name is removed in
        another triple. The store is then serialized and `localStorage` is updated with the new Turtle string.
    </CodeStep>
</Code>